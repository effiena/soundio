<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>SOUNDIO</title>

<link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='picture/soundiologo.png') }}">
<link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='picture/soundiologo.png') }}">
<link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Soundio">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
/* Body & background */
html, body {
    margin: 0;
    font-family: Montserrat, sans-serif;
    background: linear-gradient(135deg, #e0a3d6, #c07ea0, #b266c2);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-x: hidden;
    color: #fff;
}

/* Logo with glow animation */
#logo-container {
    margin-top: 20px;
    position: relative;
}
#soundio-logo {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 3px solid rgba(255,255,255,0.3);
    box-shadow: 0 0 20px rgba(255,255,255,0.6), 0 0 40px rgba(255,182,193,0.4);
    transition: transform 0.2s, box-shadow 0.2s;
}

/* App title */
h1 {
    margin: 15px 0;
    font-size: 36px;
    font-weight: 700;
    text-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

/* Frosted glass Now Playing */
#current-song-container {
    margin: 10px auto;
    width: 90%;
    max-width: 600px;
    padding: 12px 16px;
    border-radius: 20px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    text-align: center;
    font-weight: bold;
    font-size: 18px;
}

/* Playlist */
#playlist {
    margin: 15px auto;
    width: 90%;
    max-width: 600px;
    border-radius: 20px;
    overflow: hidden;
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
}
#playlist li {
    list-style: none;
    padding: 14px 16px;
    cursor: pointer;
    transition: background 0.3s;
    border-bottom: 1px solid rgba(255,255,255,0.2);
}
#playlist li:hover { background: rgba(255,255,255,0.2); }
#playlist li.active { font-weight: bold; color: #fff; background: rgba(255,255,255,0.3); }

/* Player controls */
.player-container {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}
audio {
    width: 90%;
    max-width: 600px;
    margin-bottom: 15px;
}
button {
    background: rgba(255,182,193,0.6);
    border: none;
    border-radius: 12px;
    padding: 10px 16px;
    margin: 5px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s, transform 0.2s;
}
button:hover {
    background: rgba(255,182,193,0.8);
    transform: scale(1.05);
}

/* Genre dropdown */
#genre-filter {
    margin: 10px 0;
    padding: 6px 12px;
    border-radius: 12px;
    border: none;
    background: rgba(255,255,255,0.2);
    color: #fff;
    font-weight: bold;
}

/* Scroll animation for long song titles */
@keyframes scroll {
  0% { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}
</style>
</head>
<body>

<div id="logo-container">
    <img src="{{ url_for('static', filename='picture/soundiologo.png') }}" id="soundio-logo" alt="Soundio Logo">
</div>

<h1>üé∂ SOUNDIO üé∂</h1>

<select id="genre-filter">
    <option value="all">All</option>
    <option value="Malay">Malay</option>
    <option value="English">English</option>
    <option value="Mandarin">Mandarin</option>
    <option value="Korean">Korean</option>
</select>

<div id="current-song-container">üéµ Select a song to play üéµ</div>

<ul id="playlist">
{% for song in playlist %}
    <li data-url="/static/music/{{ song }}" data-genre="{{ song.genre|default('English') }}">
        üéµ {{ song.rsplit('.',1)[0].replace('_',' ') }}
    </li>
{% endfor %}
</ul>

<div class="player-container">
    <audio id="player" controls></audio>
    <div>
        <button id="prev-btn">‚èÆ Prev</button>
        <button id="play-pause-btn">‚ñ∂Ô∏è Play / ‚è∏ Pause</button>
        <button id="stop-btn">‚èπ Stop</button>
        <button id="next-btn">‚è≠ Next</button>
        <button id="shuffle-btn">üîÄ Shuffle</button>
        <button id="repeat-btn">üîÅ Repeat</button>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const player = document.getElementById("player");
    const playlistEl = document.getElementById("playlist");
    const items = Array.from(playlistEl.children);
    const titleEl = document.getElementById("current-song");
    const genreFilter = document.getElementById("genre-filter");

    let index = 0;
    let isPlaying = false;
    let repeat = false;

    function updateTitle(text){
        titleEl.textContent = "üé∂ Now Playing: " + text;
    }

    function loadSong(i){
        const li = items[i];
        if(!li) return;
        items.forEach(it=>it.classList.remove("active"));
        li.classList.add("active");
        player.src = encodeURI(li.dataset.url);
        player.play();
        isPlaying = true;
        updateTitle(li.textContent);
        index = i;
    }

    items.forEach((li,i)=>li.addEventListener("click",()=>loadSong(i)));

    document.getElementById("play-pause-btn").onclick = ()=>{
        if(!player.src) loadSong(0);
        else if(isPlaying){ player.pause(); isPlaying=false; }
        else{ player.play(); isPlaying=true; }
    };
    document.getElementById("stop-btn").onclick = ()=>{
        player.pause(); player.currentTime=0; isPlaying=false;
    };
    document.getElementById("next-btn").onclick = ()=>{
        index = repeat ? index : (index+1)%items.length; loadSong(index);
    };
    document.getElementById("prev-btn").onclick = ()=>{
        index = (index-1+items.length)%items.length; loadSong(index);
    };
    document.getElementById("shuffle-btn").onclick = ()=>{
        for(let i=items.length-1;i>0;i--){
            let j=Math.floor(Math.random()*(i+1));
            [items[i].dataset.url, items[j].dataset.url]=[items[j].dataset.url, items[i].dataset.url];
            [items[i].textContent, items[j].textContent]=[items[j].textContent, items[i].textContent];
        }
        loadSong(0);
    };
    document.getElementById("repeat-btn").onclick = ()=>{ repeat = !repeat; alert("Repeat " + (repeat?"ON":"OFF")); };

    genreFilter.addEventListener("change", ()=>{
        const val = genreFilter.value.toLowerCase();
        items.forEach(li=>{
            li.style.display = (val==="all" || li.dataset.genre.toLowerCase()===val) ? "block" : "none";
        });
    });

    player.addEventListener("ended", ()=>{
        index = repeat ? index : (index+1)%items.length; 
        loadSong(index);
    });
});
</script>

<!--
<div style="margin-top:20px;">
    <button onclick="alert('SOUNDIO Music App ¬© 2026 by Asli.Tech');" style="padding:8px 12px; border-radius:6px; border:none; background:#8c9352; color:#F4F1DE; cursor:pointer;">
        About Us
    </button>
</div>
-->
<footer style="text-align:center; padding:10px; font-size:14px; color:#555;">
    ¬© 2026 Soundio Music App. All rights reserved. <br>
   <a> Created by Asli.Tech</a>
<a href="/license.txt" target="_blank">SOUNDIO Music App License</a>
</footer>

</body>
</html>
